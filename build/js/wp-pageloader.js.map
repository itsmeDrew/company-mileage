{"version":3,"sources":["wp-pageloader.js"],"names":["factory","define","requirejs","rndKey","Date","getTime","onError","toString","err","message","indexOf","call","exports","module","emptyFunction","parseURL","href","isWindowLocation","isNotAPI","re","windowLocation","isSupportHistoryAPI","replace","protocol","host","settings","RegExp","current","base","document","getElementsByTagName","getAttribute","_pathname","_protocol","test","_host","_search","anchorElement","result","exec","pathname","search","hash","relative","nohash","_href","_hostname","_port","_hash","_relative","_nohash","_special","isSupportHistoryAPIDetect","ua","global","navigator","userAgent","historyPushState","storageInitialize","sessionStorage","setItem","sessionStorageKey","removeItem","_e_","getItem","key","cookie","split","length","pop","shift","value","state","historyObject","JSON","stringify","stateStorage","parse","addEvent","eventNamePrefix","redefineProperty","object","prop","descriptor","onWrapped","testOnly","set","isDefinedSetter","isDefinedGetter","get","configurable","defineProperty","__defineGetter__","__defineSetter__","originalValue","removeEvent","onpopstate","setTimeout","triggerEventsInWindowAttributes","temp","Object","create","getPrototypeOf","bind","constructor","prototype","prepareDescriptorsForObject","locationDescriptors","addEventListener","event","listener","capture","eventsList","push","arguments","removeEventListener","list","i","splice","dispatchEvent","eventObject","eventType","type","target","props","onhashchange","len","dispatch","firePopState","o","createEvent","createEventObject","initEvent","fireInitialState","isFireInitialState","changeState","url","lastURLValue","lastURL","isUsedHistoryLocationFlag","urlObject","isSupportStateObjectInHistory","onHashChange","fireNow","checkUrlForPopState","oldURLObject","newURLObject","oldURL","newURL","onLoad","noScroll","e","scrollToAnchorId","locationObject","anchorTarget","nodeName","parentNode","onAnchorClick","srcElement","defaultPrevented","returnValue","expect","isEqualBaseURL","preventDefault","getElementById","id","rect","getBoundingClientRect","scrollTo","documentElement","scrollLeft","top","scrollTop","clientTop","initialize","scripts","src","arg","a","data","eventsDescriptors","historyDescriptors","hasOwnProperty","n","history","substr","addEventListenerName","readyState","window","this","customOrigin","location","windowHistory","pushState","historyReplaceState","replaceState","createElement","removeEventListenerName","dispatchEventName","basepath","redirect","init","lastTitle","title","fastFixChrome","method","args","isNeedFix","apply","setup","self","path","t","assign","reload","flag","origin","hostname","port","root","amd","Spinner","createEl","tag","el","ins","parent","appendChild","addAnimation","alpha","trail","lines","name","join","start","z","Math","max","prefix","useCssAnimations","substring","toLowerCase","pre","animations","sheet","insertRule","cssRules","vendor","pp","s","style","charAt","toUpperCase","slice","undefined","prefixes","css","merge","obj","def","getColor","color","idx","opts","defaults","initVML","vml","attr","addRule","grp","coordsize","coordorigin","r","width","height","seg","dx","filter","g","rotation","left","arcsize","corners","scale","radius","opacity","margin","position","shadow","val","c","firstChild","childNodes","rotate","direction","speed","fps","zIndex","className","hwaccel","spin","stop","insertBefore","setAttribute","f","ostep","astep","anim","j","timeout","clearTimeout","removeChild","fill","background","boxShadow","transformOrigin","transform","borderRadius","animation","styleSheet","probe","behavior","adj","require","Error","jQuery","$","fn","each","$this","spinner","extend","presets","tiny","small","large","PG8","PG8Data","PageLoader","thisLink","nextLink","thisPage","parseInt","startPage","nextPage","maxPages","maxedOut","ajaxPageLoader","content","children","wrapAll","holder","handler","append","$window","on","next","parents","before","show","loader","firstPage","firstTop","offset","firstLink","winTop","pusher","scrollOffset","bottom","outerHeight","pushDelay","infinScroll","$document","scrollHeight","scrollPosition","scrollLastPage","scrollDiff","infinOffset","infinFooter","trigger","infinDelay","isFunction","after","spinOpts","hide","page","link","load","$navLink","remove","is","prev","loaded","scroll","analytics","animate","scrollDelay","ga","_gaq","body","timeago","refresh","$s","$t","autoDispose","contains","prepareData","isNaN","datetime","cutoff","abs","distance","text","inWords","element","trim","localeTitle","toLocaleString","isTime","date","timestamp","refreshMillis","allowPast","allowFuture","strings","prefixAgo","prefixFromNow","suffixAgo","suffixFromNow","inPast","seconds","minute","minutes","hour","hours","day","days","month","months","year","years","wordSeparator","numbers","distanceMillis","substitute","stringOrFunction","number","string","$l","suffix","words","round","separator","iso8601","elem","tagName","functions","refresh_el","proxy","_timeagoInterval","setInterval","update","updateFromDOM","dispose","clearInterval","action","options","nav","menu","button","display","onclick"],"mappings":"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","file":"wp-pageloader.js","sourcesContent":["/*!\n * History API JavaScript Library v4.2.7\n *\n * Support: IE8+, FF3+, Opera 9+, Safari, Chrome and other\n *\n * Copyright 2011-2015, Dmitrii Pakhtinov ( spb.piksel@gmail.com )\n *\n * http://spb-piksel.ru/\n *\n * MIT license:\n *   http://www.opensource.org/licenses/mit-license.php\n *\n * Update: 2016-03-08 16:57\n */\n(function(factory) {\n  if (typeof define === 'function' && define['amd']) {\n    if (typeof requirejs !== 'undefined') {\n      // https://github.com/devote/HTML5-History-API/issues/73\n      var rndKey = '[history' + (new Date()).getTime() + ']';\n      var onError = requirejs['onError'];\n      factory.toString = function() {\n        return rndKey;\n      };\n      requirejs['onError'] = function(err) {\n        if (err.message.indexOf(rndKey) === -1) {\n          onError.call(requirejs, err);\n        }\n      };\n    }\n    define([], factory);\n  }\n  // commonJS support\n  if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n    module['exports'] = factory();\n  } else {\n    // execute anyway\n    return factory();\n  }\n})(function() {\n  // Define global variable\n  var global = (typeof window === 'object' ? window : this) || {};\n  // Prevent the code from running if there is no window.history object or library already loaded\n  if (!global.history || \"emulate\" in global.history) return global.history;\n  // symlink to document\n  var document = global.document;\n  // HTML element\n  var documentElement = document.documentElement;\n  // symlink to constructor of Object\n  var Object = global['Object'];\n  // symlink to JSON Object\n  var JSON = global['JSON'];\n  // symlink to instance object of 'Location'\n  var windowLocation = global.location;\n  // symlink to instance object of 'History'\n  var windowHistory = global.history;\n  // new instance of 'History'. The default is a reference to the original object instance\n  var historyObject = windowHistory;\n  // symlink to method 'history.pushState'\n  var historyPushState = windowHistory.pushState;\n  // symlink to method 'history.replaceState'\n  var historyReplaceState = windowHistory.replaceState;\n  // if the browser supports HTML5-History-API\n  var isSupportHistoryAPI = isSupportHistoryAPIDetect();\n  // verifies the presence of an object 'state' in interface 'History'\n  var isSupportStateObjectInHistory = 'state' in windowHistory;\n  // symlink to method 'Object.defineProperty'\n  var defineProperty = Object.defineProperty;\n  // new instance of 'Location', for IE8 will use the element HTMLAnchorElement, instead of pure object\n  var locationObject = redefineProperty({}, 't') ? {} : document.createElement('a');\n  // prefix for the names of events\n  var eventNamePrefix = '';\n  // String that will contain the name of the method\n  var addEventListenerName = global.addEventListener ? 'addEventListener' : (eventNamePrefix = 'on') && 'attachEvent';\n  // String that will contain the name of the method\n  var removeEventListenerName = global.removeEventListener ? 'removeEventListener' : 'detachEvent';\n  // String that will contain the name of the method\n  var dispatchEventName = global.dispatchEvent ? 'dispatchEvent' : 'fireEvent';\n  // reference native methods for the events\n  var addEvent = global[addEventListenerName];\n  var removeEvent = global[removeEventListenerName];\n  var dispatch = global[dispatchEventName];\n  // default settings\n  var settings = {\"basepath\": '/', \"redirect\": 0, \"type\": '/', \"init\": 0};\n  // key for the sessionStorage\n  var sessionStorageKey = '__historyAPI__';\n  // Anchor Element for parseURL function\n  var anchorElement = document.createElement('a');\n  // last URL before change to new URL\n  var lastURL = windowLocation.href;\n  // Control URL, need to fix the bug in Opera\n  var checkUrlForPopState = '';\n  // for fix on Safari 8\n  var triggerEventsInWindowAttributes = 1;\n  // trigger event 'onpopstate' on page load\n  var isFireInitialState = false;\n  // if used history.location of other code\n  var isUsedHistoryLocationFlag = 0;\n  // store a list of 'state' objects in the current session\n  var stateStorage = {};\n  // in this object will be stored custom handlers\n  var eventsList = {};\n  // stored last title\n  var lastTitle = document.title;\n  // store a custom origin\n  var customOrigin;\n\n  /**\n   * Properties that will be replaced in the global\n   * object 'window', to prevent conflicts\n   *\n   * @type {Object}\n   */\n  var eventsDescriptors = {\n    \"onhashchange\": null,\n    \"onpopstate\": null\n  };\n\n  /**\n   * Fix for Chrome in iOS\n   * See https://github.com/devote/HTML5-History-API/issues/29\n   */\n  var fastFixChrome = function(method, args) {\n    var isNeedFix = global.history !== windowHistory;\n    if (isNeedFix) {\n      global.history = windowHistory;\n    }\n    method.apply(windowHistory, args);\n    if (isNeedFix) {\n      global.history = historyObject;\n    }\n  };\n\n  /**\n   * Properties that will be replaced/added to object\n   * 'window.history', includes the object 'history.location',\n   * for a complete the work with the URL address\n   *\n   * @type {Object}\n   */\n  var historyDescriptors = {\n    /**\n     * Setting library initialization\n     *\n     * @param {null|String} [basepath] The base path to the site; defaults to the root \"/\".\n     * @param {null|String} [type] Substitute the string after the anchor; by default \"/\".\n     * @param {null|Boolean} [redirect] Enable link translation.\n     */\n    \"setup\": function(basepath, type, redirect) {\n      settings[\"basepath\"] = ('' + (basepath == null ? settings[\"basepath\"] : basepath))\n        .replace(/(?:^|\\/)[^\\/]*$/, '/');\n      settings[\"type\"] = type == null ? settings[\"type\"] : type;\n      settings[\"redirect\"] = redirect == null ? settings[\"redirect\"] : !!redirect;\n    },\n    /**\n     * @namespace history\n     * @param {String} [type]\n     * @param {String} [basepath]\n     */\n    \"redirect\": function(type, basepath) {\n      historyObject['setup'](basepath, type);\n      basepath = settings[\"basepath\"];\n      if (global.top == global.self) {\n        var relative = parseURL(null, false, true)._relative;\n        var path = windowLocation.pathname + windowLocation.search;\n        if (isSupportHistoryAPI) {\n          path = path.replace(/([^\\/])$/, '$1/');\n          if (relative != basepath && (new RegExp(\"^\" + basepath + \"$\", \"i\")).test(path)) {\n            windowLocation.replace(relative);\n          }\n        } else if (path != basepath) {\n          path = path.replace(/([^\\/])\\?/, '$1/?');\n          if ((new RegExp(\"^\" + basepath, \"i\")).test(path)) {\n            windowLocation.replace(basepath + '#' + path.\n              replace(new RegExp(\"^\" + basepath, \"i\"), settings[\"type\"]) + windowLocation.hash);\n          }\n        }\n      }\n    },\n    /**\n     * The method adds a state object entry\n     * to the history.\n     *\n     * @namespace history\n     * @param {Object} state\n     * @param {string} title\n     * @param {string} [url]\n     */\n    pushState: function(state, title, url) {\n      var t = document.title;\n      if (lastTitle != null) {\n        document.title = lastTitle;\n      }\n      historyPushState && fastFixChrome(historyPushState, arguments);\n      changeState(state, url);\n      document.title = t;\n      lastTitle = title;\n    },\n    /**\n     * The method updates the state object,\n     * title, and optionally the URL of the\n     * current entry in the history.\n     *\n     * @namespace history\n     * @param {Object} state\n     * @param {string} title\n     * @param {string} [url]\n     */\n    replaceState: function(state, title, url) {\n      var t = document.title;\n      if (lastTitle != null) {\n        document.title = lastTitle;\n      }\n      delete stateStorage[windowLocation.href];\n      historyReplaceState && fastFixChrome(historyReplaceState, arguments);\n      changeState(state, url, true);\n      document.title = t;\n      lastTitle = title;\n    },\n    /**\n     * Object 'history.location' is similar to the\n     * object 'window.location', except that in\n     * HTML4 browsers it will behave a bit differently\n     *\n     * @namespace history\n     */\n    \"location\": {\n      set: function(value) {\n        if (isUsedHistoryLocationFlag === 0) isUsedHistoryLocationFlag = 1;\n        global.location = value;\n      },\n      get: function() {\n        if (isUsedHistoryLocationFlag === 0) isUsedHistoryLocationFlag = 1;\n        return locationObject;\n      }\n    },\n    /**\n     * A state object is an object representing\n     * a user interface state.\n     *\n     * @namespace history\n     */\n    \"state\": {\n      get: function() {\n        if (typeof stateStorage[windowLocation.href] === 'object') {\n          return JSON.parse(JSON.stringify(stateStorage[windowLocation.href]));\n        } else if(typeof stateStorage[windowLocation.href] !== 'undefined') {\n          return stateStorage[windowLocation.href];\n        } else {\n          return null;\n        }\n      }\n    }\n  };\n\n  /**\n   * Properties for object 'history.location'.\n   * Object 'history.location' is similar to the\n   * object 'window.location', except that in\n   * HTML4 browsers it will behave a bit differently\n   *\n   * @type {Object}\n   */\n  var locationDescriptors = {\n    /**\n     * Navigates to the given page.\n     *\n     * @namespace history.location\n     */\n    assign: function(url) {\n      if (!isSupportHistoryAPI && ('' + url).indexOf('#') === 0) {\n        changeState(null, url);\n      } else {\n        windowLocation.assign(url);\n      }\n    },\n    /**\n     * Reloads the current page.\n     *\n     * @namespace history.location\n     */\n    reload: function(flag) {\n      windowLocation.reload(flag);\n    },\n    /**\n     * Removes the current page from\n     * the session history and navigates\n     * to the given page.\n     *\n     * @namespace history.location\n     */\n    replace: function(url) {\n      if (!isSupportHistoryAPI && ('' + url).indexOf('#') === 0) {\n        changeState(null, url, true);\n      } else {\n        windowLocation.replace(url);\n      }\n    },\n    /**\n     * Returns the current page's location.\n     *\n     * @namespace history.location\n     */\n    toString: function() {\n      return this.href;\n    },\n    /**\n     * Returns the current origin.\n     *\n     * @namespace history.location\n     */\n    \"origin\": {\n      get: function() {\n        if (customOrigin !== void 0) {\n          return customOrigin;\n        }\n        if (!windowLocation.origin) {\n          return windowLocation.protocol + \"//\" + windowLocation.hostname + (windowLocation.port ? ':' + windowLocation.port: '');\n        }\n        return windowLocation.origin;\n      },\n      set: function(value) {\n        customOrigin = value;\n      }\n    },\n    /**\n     * Returns the current page's location.\n     * Can be set, to navigate to another page.\n     *\n     * @namespace history.location\n     */\n    \"href\": isSupportHistoryAPI ? null : {\n      get: function() {\n        return parseURL()._href;\n      }\n    },\n    /**\n     * Returns the current page's protocol.\n     *\n     * @namespace history.location\n     */\n    \"protocol\": null,\n    /**\n     * Returns the current page's host and port number.\n     *\n     * @namespace history.location\n     */\n    \"host\": null,\n    /**\n     * Returns the current page's host.\n     *\n     * @namespace history.location\n     */\n    \"hostname\": null,\n    /**\n     * Returns the current page's port number.\n     *\n     * @namespace history.location\n     */\n    \"port\": null,\n    /**\n     * Returns the current page's path only.\n     *\n     * @namespace history.location\n     */\n    \"pathname\": isSupportHistoryAPI ? null : {\n      get: function() {\n        return parseURL()._pathname;\n      }\n    },\n    /**\n     * Returns the current page's search\n     * string, beginning with the character\n     * '?' and to the symbol '#'\n     *\n     * @namespace history.location\n     */\n    \"search\": isSupportHistoryAPI ? null : {\n      get: function() {\n        return parseURL()._search;\n      }\n    },\n    /**\n     * Returns the current page's hash\n     * string, beginning with the character\n     * '#' and to the end line\n     *\n     * @namespace history.location\n     */\n    \"hash\": isSupportHistoryAPI ? null : {\n      set: function(value) {\n        changeState(null, ('' + value).replace(/^(#|)/, '#'), false, lastURL);\n      },\n      get: function() {\n        return parseURL()._hash;\n      }\n    }\n  };\n\n  /**\n   * Just empty function\n   *\n   * @return void\n   */\n  function emptyFunction() {\n    // dummy\n  }\n\n  /**\n   * Prepares a parts of the current or specified reference for later use in the library\n   *\n   * @param {string} [href]\n   * @param {boolean} [isWindowLocation]\n   * @param {boolean} [isNotAPI]\n   * @return {Object}\n   */\n  function parseURL(href, isWindowLocation, isNotAPI) {\n    var re = /(?:([a-zA-Z0-9\\-]+\\:))?(?:\\/\\/(?:[^@]*@)?([^\\/:\\?#]+)(?::([0-9]+))?)?([^\\?#]*)(?:(\\?[^#]+)|\\?)?(?:(#.*))?/;\n    if (href != null && href !== '' && !isWindowLocation) {\n      var current = parseURL(),\n          base = document.getElementsByTagName('base')[0];\n      if (!isNotAPI && base && base.getAttribute('href')) {\n        // Fix for IE ignoring relative base tags.\n        // See http://stackoverflow.com/questions/3926197/html-base-tag-and-local-folder-path-with-internet-explorer\n        base.href = base.href;\n        current = parseURL(base.href, null, true);\n      }\n      var _pathname = current._pathname, _protocol = current._protocol;\n      // convert to type of string\n      href = '' + href;\n      // convert relative link to the absolute\n      href = /^(?:\\w+\\:)?\\/\\//.test(href) ? href.indexOf(\"/\") === 0\n        ? _protocol + href : href : _protocol + \"//\" + current._host + (\n        href.indexOf(\"/\") === 0 ? href : href.indexOf(\"?\") === 0\n          ? _pathname + href : href.indexOf(\"#\") === 0\n          ? _pathname + current._search + href : _pathname.replace(/[^\\/]+$/g, '') + href\n        );\n    } else {\n      href = isWindowLocation ? href : windowLocation.href;\n      // if current browser not support History-API\n      if (!isSupportHistoryAPI || isNotAPI) {\n        // get hash fragment\n        href = href.replace(/^[^#]*/, '') || \"#\";\n        // form the absolute link from the hash\n        // https://github.com/devote/HTML5-History-API/issues/50\n        href = windowLocation.protocol.replace(/:.*$|$/, ':') + '//' + windowLocation.host + settings['basepath']\n          + href.replace(new RegExp(\"^#[\\/]?(?:\" + settings[\"type\"] + \")?\"), \"\");\n      }\n    }\n    // that would get rid of the links of the form: /../../\n    anchorElement.href = href;\n    // decompose the link in parts\n    var result = re.exec(anchorElement.href);\n    // host name with the port number\n    var host = result[2] + (result[3] ? ':' + result[3] : '');\n    // folder\n    var pathname = result[4] || '/';\n    // the query string\n    var search = result[5] || '';\n    // hash\n    var hash = result[6] === '#' ? '' : (result[6] || '');\n    // relative link, no protocol, no host\n    var relative = pathname + search + hash;\n    // special links for set to hash-link, if browser not support History API\n    var nohash = pathname.replace(new RegExp(\"^\" + settings[\"basepath\"], \"i\"), settings[\"type\"]) + search;\n    // result\n    return {\n      _href: result[1] + '//' + host + relative,\n      _protocol: result[1],\n      _host: host,\n      _hostname: result[2],\n      _port: result[3] || '',\n      _pathname: pathname,\n      _search: search,\n      _hash: hash,\n      _relative: relative,\n      _nohash: nohash,\n      _special: nohash + hash\n    }\n  }\n\n  /**\n   * Detect HistoryAPI support while taking into account false positives.\n   * Based on https://github.com/Modernizr/Modernizr/blob/master/feature-detects/history.js\n   */\n  function isSupportHistoryAPIDetect(){\n    var ua = global.navigator.userAgent;\n    // We only want Android 2 and 4.0, stock browser, and not Chrome which identifies\n    // itself as 'Mobile Safari' as well, nor Windows Phone (issue #1471).\n    if ((ua.indexOf('Android 2.') !== -1 ||\n      (ua.indexOf('Android 4.0') !== -1)) &&\n      ua.indexOf('Mobile Safari') !== -1 &&\n      ua.indexOf('Chrome') === -1 &&\n      ua.indexOf('Windows Phone') === -1)\n    {\n      return false;\n    }\n    // Return the regular check\n    return !!historyPushState;\n  }\n\n  /**\n   * Initializing storage for the custom state's object\n   */\n  function storageInitialize() {\n    var sessionStorage;\n    /**\n     * sessionStorage throws error when cookies are disabled\n     * Chrome content settings when running the site in a Facebook IFrame.\n     * see: https://github.com/devote/HTML5-History-API/issues/34\n     * and: http://stackoverflow.com/a/12976988/669360\n     */\n    try {\n      sessionStorage = global['sessionStorage'];\n      sessionStorage.setItem(sessionStorageKey + 't', '1');\n      sessionStorage.removeItem(sessionStorageKey + 't');\n    } catch(_e_) {\n      sessionStorage = {\n        getItem: function(key) {\n          var cookie = document.cookie.split(key + \"=\");\n          return cookie.length > 1 && cookie.pop().split(\";\").shift() || 'null';\n        },\n        setItem: function(key, value) {\n          var state = {};\n          // insert one current element to cookie\n          if (state[windowLocation.href] = historyObject.state) {\n            document.cookie = key + '=' + JSON.stringify(state);\n          }\n        }\n      }\n    }\n\n    try {\n      // get cache from the storage in browser\n      stateStorage = JSON.parse(sessionStorage.getItem(sessionStorageKey)) || {};\n    } catch(_e_) {\n      stateStorage = {};\n    }\n\n    // hang up the event handler to event unload page\n    addEvent(eventNamePrefix + 'unload', function() {\n      // save current state's object\n      sessionStorage.setItem(sessionStorageKey, JSON.stringify(stateStorage));\n    }, false);\n  }\n\n  /**\n   * This method is implemented to override the built-in(native)\n   * properties in the browser, unfortunately some browsers are\n   * not allowed to override all the properties and even add.\n   * For this reason, this was written by a method that tries to\n   * do everything necessary to get the desired result.\n   *\n   * @param {Object} object The object in which will be overridden/added property\n   * @param {String} prop The property name to be overridden/added\n   * @param {Object} [descriptor] An object containing properties set/get\n   * @param {Function} [onWrapped] The function to be called when the wrapper is created\n   * @return {Object|Boolean} Returns an object on success, otherwise returns false\n   */\n  function redefineProperty(object, prop, descriptor, onWrapped) {\n    var testOnly = 0;\n    // test only if descriptor is undefined\n    if (!descriptor) {\n      descriptor = {set: emptyFunction};\n      testOnly = 1;\n    }\n    // variable will have a value of true the success of attempts to set descriptors\n    var isDefinedSetter = !descriptor.set;\n    var isDefinedGetter = !descriptor.get;\n    // for tests of attempts to set descriptors\n    var test = {configurable: true, set: function() {\n      isDefinedSetter = 1;\n    }, get: function() {\n      isDefinedGetter = 1;\n    }};\n\n    try {\n      // testing for the possibility of overriding/adding properties\n      defineProperty(object, prop, test);\n      // running the test\n      object[prop] = object[prop];\n      // attempt to override property using the standard method\n      defineProperty(object, prop, descriptor);\n    } catch(_e_) {\n    }\n\n    // If the variable 'isDefined' has a false value, it means that need to try other methods\n    if (!isDefinedSetter || !isDefinedGetter) {\n      // try to override/add the property, using deprecated functions\n      if (object.__defineGetter__) {\n        // testing for the possibility of overriding/adding properties\n        object.__defineGetter__(prop, test.get);\n        object.__defineSetter__(prop, test.set);\n        // running the test\n        object[prop] = object[prop];\n        // attempt to override property using the deprecated functions\n        descriptor.get && object.__defineGetter__(prop, descriptor.get);\n        descriptor.set && object.__defineSetter__(prop, descriptor.set);\n      }\n\n      // Browser refused to override the property, using the standard and deprecated methods\n      if (!isDefinedSetter || !isDefinedGetter) {\n        if (testOnly) {\n          return false;\n        } else if (object === global) {\n          // try override global properties\n          try {\n            // save original value from this property\n            var originalValue = object[prop];\n            // set null to built-in(native) property\n            object[prop] = null;\n          } catch(_e_) {\n          }\n          // This rule for Internet Explorer 8\n          if ('execScript' in global) {\n            /**\n             * to IE8 override the global properties using\n             * VBScript, declaring it in global scope with\n             * the same names.\n             */\n            global['execScript']('Public ' + prop, 'VBScript');\n            global['execScript']('var ' + prop + ';', 'JavaScript');\n          } else {\n            try {\n              /**\n               * This hack allows to override a property\n               * with the set 'configurable: false', working\n               * in the hack 'Safari' to 'Mac'\n               */\n              defineProperty(object, prop, {value: emptyFunction});\n            } catch(_e_) {\n              if (prop === 'onpopstate') {\n                /**\n                 * window.onpopstate fires twice in Safari 8.0.\n                 * Block initial event on window.onpopstate\n                 * See: https://github.com/devote/HTML5-History-API/issues/69\n                 */\n                addEvent('popstate', descriptor = function() {\n                  removeEvent('popstate', descriptor, false);\n                  var onpopstate = object.onpopstate;\n                  // cancel initial event on attribute handler\n                  object.onpopstate = null;\n                  setTimeout(function() {\n                    // restore attribute value after short time\n                    object.onpopstate = onpopstate;\n                  }, 1);\n                }, false);\n                // cancel trigger events on attributes in object the window\n                triggerEventsInWindowAttributes = 0;\n              }\n            }\n          }\n          // set old value to new variable\n          object[prop] = originalValue;\n\n        } else {\n          // the last stage of trying to override the property\n          try {\n            try {\n              // wrap the object in a new empty object\n              var temp = Object.create(object);\n              defineProperty(Object.getPrototypeOf(temp) === object ? temp : object, prop, descriptor);\n              for(var key in object) {\n                // need to bind a function to the original object\n                if (typeof object[key] === 'function') {\n                  temp[key] = object[key].bind(object);\n                }\n              }\n              try {\n                // to run a function that will inform about what the object was to wrapped\n                onWrapped.call(temp, temp, object);\n              } catch(_e_) {\n              }\n              object = temp;\n            } catch(_e_) {\n              // sometimes works override simply by assigning the prototype property of the constructor\n              defineProperty(object.constructor.prototype, prop, descriptor);\n            }\n          } catch(_e_) {\n            // all methods have failed\n            return false;\n          }\n        }\n      }\n    }\n\n    return object;\n  }\n\n  /**\n   * Adds the missing property in descriptor\n   *\n   * @param {Object} object An object that stores values\n   * @param {String} prop Name of the property in the object\n   * @param {Object|null} descriptor Descriptor\n   * @return {Object} Returns the generated descriptor\n   */\n  function prepareDescriptorsForObject(object, prop, descriptor) {\n    descriptor = descriptor || {};\n    // the default for the object 'location' is the standard object 'window.location'\n    object = object === locationDescriptors ? windowLocation : object;\n    // setter for object properties\n    descriptor.set = (descriptor.set || function(value) {\n      object[prop] = value;\n    });\n    // getter for object properties\n    descriptor.get = (descriptor.get || function() {\n      return object[prop];\n    });\n    return descriptor;\n  }\n\n  /**\n   * Wrapper for the methods 'addEventListener/attachEvent' in the context of the 'window'\n   *\n   * @param {String} event The event type for which the user is registering\n   * @param {Function} listener The method to be called when the event occurs.\n   * @param {Boolean} capture If true, capture indicates that the user wishes to initiate capture.\n   * @return void\n   */\n  function addEventListener(event, listener, capture) {\n    if (event in eventsList) {\n      // here stored the event listeners 'popstate/hashchange'\n      eventsList[event].push(listener);\n    } else {\n      // FireFox support non-standart four argument aWantsUntrusted\n      // https://github.com/devote/HTML5-History-API/issues/13\n      if (arguments.length > 3) {\n        addEvent(event, listener, capture, arguments[3]);\n      } else {\n        addEvent(event, listener, capture);\n      }\n    }\n  }\n\n  /**\n   * Wrapper for the methods 'removeEventListener/detachEvent' in the context of the 'window'\n   *\n   * @param {String} event The event type for which the user is registered\n   * @param {Function} listener The parameter indicates the Listener to be removed.\n   * @param {Boolean} capture Was registered as a capturing listener or not.\n   * @return void\n   */\n  function removeEventListener(event, listener, capture) {\n    var list = eventsList[event];\n    if (list) {\n      for(var i = list.length; i--;) {\n        if (list[i] === listener) {\n          list.splice(i, 1);\n          break;\n        }\n      }\n    } else {\n      removeEvent(event, listener, capture);\n    }\n  }\n\n  /**\n   * Wrapper for the methods 'dispatchEvent/fireEvent' in the context of the 'window'\n   *\n   * @param {Event|String} event Instance of Event or event type string if 'eventObject' used\n   * @param {*} [eventObject] For Internet Explorer 8 required event object on this argument\n   * @return {Boolean} If 'preventDefault' was called the value is false, else the value is true.\n   */\n  function dispatchEvent(event, eventObject) {\n    var eventType = ('' + (typeof event === \"string\" ? event : event.type)).replace(/^on/, '');\n    var list = eventsList[eventType];\n    if (list) {\n      // need to understand that there is one object of Event\n      eventObject = typeof event === \"string\" ? eventObject : event;\n      if (eventObject.target == null) {\n        // need to override some of the properties of the Event object\n        for(var props = ['target', 'currentTarget', 'srcElement', 'type']; event = props.pop();) {\n          // use 'redefineProperty' to override the properties\n          eventObject = redefineProperty(eventObject, event, {\n            get: event === 'type' ? function() {\n              return eventType;\n            } : function() {\n              return global;\n            }\n          });\n        }\n      }\n      if (triggerEventsInWindowAttributes) {\n        // run function defined in the attributes 'onpopstate/onhashchange' in the 'window' context\n        ((eventType === 'popstate' ? global.onpopstate : global.onhashchange)\n          || emptyFunction).call(global, eventObject);\n      }\n      // run other functions that are in the list of handlers\n      for(var i = 0, len = list.length; i < len; i++) {\n        list[i].call(global, eventObject);\n      }\n      return true;\n    } else {\n      return dispatch(event, eventObject);\n    }\n  }\n\n  /**\n   * dispatch current state event\n   */\n  function firePopState() {\n    var o = document.createEvent ? document.createEvent('Event') : document.createEventObject();\n    if (o.initEvent) {\n      o.initEvent('popstate', false, false);\n    } else {\n      o.type = 'popstate';\n    }\n    o.state = historyObject.state;\n    // send a newly created events to be processed\n    dispatchEvent(o);\n  }\n\n  /**\n   * fire initial state for non-HTML5 browsers\n   */\n  function fireInitialState() {\n    if (isFireInitialState) {\n      isFireInitialState = false;\n      firePopState();\n    }\n  }\n\n  /**\n   * Change the data of the current history for HTML4 browsers\n   *\n   * @param {Object} state\n   * @param {string} [url]\n   * @param {Boolean} [replace]\n   * @param {string} [lastURLValue]\n   * @return void\n   */\n  function changeState(state, url, replace, lastURLValue) {\n    if (!isSupportHistoryAPI) {\n      // if not used implementation history.location\n      if (isUsedHistoryLocationFlag === 0) isUsedHistoryLocationFlag = 2;\n      // normalization url\n      var urlObject = parseURL(url, isUsedHistoryLocationFlag === 2 && ('' + url).indexOf(\"#\") !== -1);\n      // if current url not equal new url\n      if (urlObject._relative !== parseURL()._relative) {\n        // if empty lastURLValue to skip hash change event\n        lastURL = lastURLValue;\n        if (replace) {\n          // only replace hash, not store to history\n          windowLocation.replace(\"#\" + urlObject._special);\n        } else {\n          // change hash and add new record to history\n          windowLocation.hash = urlObject._special;\n        }\n      }\n    } else {\n      lastURL = windowLocation.href;\n    }\n    if (!isSupportStateObjectInHistory && state) {\n      stateStorage[windowLocation.href] = state;\n    }\n    isFireInitialState = false;\n  }\n\n  /**\n   * Event handler function changes the hash in the address bar\n   *\n   * @param {Event} event\n   * @return void\n   */\n  function onHashChange(event) {\n    // https://github.com/devote/HTML5-History-API/issues/46\n    var fireNow = lastURL;\n    // new value to lastURL\n    lastURL = windowLocation.href;\n    // if not empty fireNow, otherwise skipped the current handler event\n    if (fireNow) {\n      // if checkUrlForPopState equal current url, this means that the event was raised popstate browser\n      if (checkUrlForPopState !== windowLocation.href) {\n        // otherwise,\n        // the browser does not support popstate event or just does not run the event by changing the hash.\n        firePopState();\n      }\n      // current event object\n      event = event || global.event;\n\n      var oldURLObject = parseURL(fireNow, true);\n      var newURLObject = parseURL();\n      // HTML4 browser not support properties oldURL/newURL\n      if (!event.oldURL) {\n        event.oldURL = oldURLObject._href;\n        event.newURL = newURLObject._href;\n      }\n      if (oldURLObject._hash !== newURLObject._hash) {\n        // if current hash not equal previous hash\n        dispatchEvent(event);\n      }\n    }\n  }\n\n  /**\n   * The event handler is fully loaded document\n   *\n   * @param {*} [noScroll]\n   * @return void\n   */\n  function onLoad(noScroll) {\n    // Get rid of the events popstate when the first loading a document in the webkit browsers\n    setTimeout(function() {\n      // hang up the event handler for the built-in popstate event in the browser\n      addEvent('popstate', function(e) {\n        // set the current url, that suppress the creation of the popstate event by changing the hash\n        checkUrlForPopState = windowLocation.href;\n        // for Safari browser in OS Windows not implemented 'state' object in 'History' interface\n        // and not implemented in old HTML4 browsers\n        if (!isSupportStateObjectInHistory) {\n          e = redefineProperty(e, 'state', {get: function() {\n            return historyObject.state;\n          }});\n        }\n        // send events to be processed\n        dispatchEvent(e);\n      }, false);\n    }, 0);\n    // for non-HTML5 browsers\n    if (!isSupportHistoryAPI && noScroll !== true && \"location\" in historyObject) {\n      // scroll window to anchor element\n      scrollToAnchorId(locationObject.hash);\n      // fire initial state for non-HTML5 browser after load page\n      fireInitialState();\n    }\n  }\n\n  /**\n   * Finds the closest ancestor anchor element (including the target itself).\n   *\n   * @param {HTMLElement} target The element to start scanning from.\n   * @return {HTMLElement} An element which is the closest ancestor anchor.\n   */\n  function anchorTarget(target) {\n    while (target) {\n      if (target.nodeName === 'A') return target;\n      target = target.parentNode;\n    }\n  }\n\n  /**\n   * Handles anchor elements with a hash fragment for non-HTML5 browsers\n   *\n   * @param {Event} e\n   */\n  function onAnchorClick(e) {\n    var event = e || global.event;\n    var target = anchorTarget(event.target || event.srcElement);\n    var defaultPrevented = \"defaultPrevented\" in event ? event['defaultPrevented'] : event.returnValue === false;\n    if (target && target.nodeName === \"A\" && !defaultPrevented) {\n      var current = parseURL();\n      var expect = parseURL(target.getAttribute(\"href\", 2));\n      var isEqualBaseURL = current._href.split('#').shift() === expect._href.split('#').shift();\n      if (isEqualBaseURL && expect._hash) {\n        if (current._hash !== expect._hash) {\n          locationObject.hash = expect._hash;\n        }\n        scrollToAnchorId(expect._hash);\n        if (event.preventDefault) {\n          event.preventDefault();\n        } else {\n          event.returnValue = false;\n        }\n      }\n    }\n  }\n\n  /**\n   * Scroll page to current anchor in url-hash\n   *\n   * @param hash\n   */\n  function scrollToAnchorId(hash) {\n    var target = document.getElementById(hash = (hash || '').replace(/^#/, ''));\n    if (target && target.id === hash && target.nodeName === \"A\") {\n      var rect = target.getBoundingClientRect();\n      global.scrollTo((documentElement.scrollLeft || 0), rect.top + (documentElement.scrollTop || 0)\n        - (documentElement.clientTop || 0));\n    }\n  }\n\n  /**\n   * Library initialization\n   *\n   * @return {Boolean} return true if all is well, otherwise return false value\n   */\n  function initialize() {\n    /**\n     * Get custom settings from the query string\n     */\n    var scripts = document.getElementsByTagName('script');\n    var src = (scripts[scripts.length - 1] || {}).src || '';\n    var arg = src.indexOf('?') !== -1 ? src.split('?').pop() : '';\n    arg.replace(/(\\w+)(?:=([^&]*))?/g, function(a, key, value) {\n      settings[key] = (value || '').replace(/^(0|false)$/, '');\n    });\n\n    /**\n     * hang up the event handler to listen to the events hashchange\n     */\n    addEvent(eventNamePrefix + 'hashchange', onHashChange, false);\n\n    // a list of objects with pairs of descriptors/object\n    var data = [locationDescriptors, locationObject, eventsDescriptors, global, historyDescriptors, historyObject];\n\n    // if browser support object 'state' in interface 'History'\n    if (isSupportStateObjectInHistory) {\n      // remove state property from descriptor\n      delete historyDescriptors['state'];\n    }\n\n    // initializing descriptors\n    for(var i = 0; i < data.length; i += 2) {\n      for(var prop in data[i]) {\n        if (data[i].hasOwnProperty(prop)) {\n          if (typeof data[i][prop] !== 'object') {\n            // If the descriptor is a simple function, simply just assign it an object\n            data[i + 1][prop] = data[i][prop];\n          } else {\n            // prepare the descriptor the required format\n            var descriptor = prepareDescriptorsForObject(data[i], prop, data[i][prop]);\n            // try to set the descriptor object\n            if (!redefineProperty(data[i + 1], prop, descriptor, function(n, o) {\n              // is satisfied if the failed override property\n              if (o === historyObject) {\n                // the problem occurs in Safari on the Mac\n                global.history = historyObject = data[i + 1] = n;\n              }\n            })) {\n              // if there is no possibility override.\n              // This browser does not support descriptors, such as IE7\n\n              // remove previously hung event handlers\n              removeEvent(eventNamePrefix + 'hashchange', onHashChange, false);\n\n              // fail to initialize :(\n              return false;\n            }\n\n            // create a repository for custom handlers onpopstate/onhashchange\n            if (data[i + 1] === global) {\n              eventsList[prop] = eventsList[prop.substr(2)] = [];\n            }\n          }\n        }\n      }\n    }\n\n    // check settings\n    historyObject['setup']();\n\n    // redirect if necessary\n    if (settings['redirect']) {\n      historyObject['redirect']();\n    }\n\n    // initialize\n    if (settings[\"init\"]) {\n      // You agree that you will use window.history.location instead window.location\n      isUsedHistoryLocationFlag = 1;\n    }\n\n    // If browser does not support object 'state' in interface 'History'\n    if (!isSupportStateObjectInHistory && JSON) {\n      storageInitialize();\n    }\n\n    // track clicks on anchors\n    if (!isSupportHistoryAPI) {\n      document[addEventListenerName](eventNamePrefix + \"click\", onAnchorClick, false);\n    }\n\n    if (document.readyState === 'complete') {\n      onLoad(true);\n    } else {\n      if (!isSupportHistoryAPI && parseURL()._relative !== settings[\"basepath\"]) {\n        isFireInitialState = true;\n      }\n      /**\n       * Need to avoid triggering events popstate the initial page load.\n       * Hang handler popstate as will be fully loaded document that\n       * would prevent triggering event onpopstate\n       */\n      addEvent(eventNamePrefix + 'load', onLoad, false);\n    }\n\n    // everything went well\n    return true;\n  }\n\n  /**\n   * Starting the library\n   */\n  if (!initialize()) {\n    // if unable to initialize descriptors\n    // therefore quite old browser and there\n    // is no sense to continue to perform\n    return;\n  }\n\n  /**\n   * If the property history.emulate will be true,\n   * this will be talking about what's going on\n   * emulation capabilities HTML5-History-API.\n   * Otherwise there is no emulation, ie the\n   * built-in browser capabilities.\n   *\n   * @type {boolean}\n   * @const\n   */\n  historyObject['emulate'] = !isSupportHistoryAPI;\n\n  /**\n   * Replace the original methods on the wrapper\n   */\n  global[addEventListenerName] = addEventListener;\n  global[removeEventListenerName] = removeEventListener;\n  global[dispatchEventName] = dispatchEvent;\n\n  return historyObject;\n});\n\n/**\n * Copyright (c) 2011-2014 Felix Gnass\n * Licensed under the MIT license\n * http://spin.js.org/\n *\n * Example:\n    var opts = {\n      lines: 12             // The number of lines to draw\n    , length: 7             // The length of each line\n    , width: 5              // The line thickness\n    , radius: 10            // The radius of the inner circle\n    , scale: 1.0            // Scales overall size of the spinner\n    , corners: 1            // Roundness (0..1)\n    , color: '#000'         // #rgb or #rrggbb\n    , opacity: 1/4          // Opacity of the lines\n    , rotate: 0             // Rotation offset\n    , direction: 1          // 1: clockwise, -1: counterclockwise\n    , speed: 1              // Rounds per second\n    , trail: 100            // Afterglow percentage\n    , fps: 20               // Frames per second when using setTimeout()\n    , zIndex: 2e9           // Use a high z-index by default\n    , className: 'spinner'  // CSS class to assign to the element\n    , top: '50%'            // center vertically\n    , left: '50%'           // center horizontally\n    , shadow: false         // Whether to render a shadow\n    , hwaccel: false        // Whether to use hardware acceleration (might be buggy)\n    , position: 'absolute'  // Element positioning\n    }\n    var target = document.getElementById('foo')\n    var spinner = new Spinner(opts).spin(target)\n */\n;(function (root, factory) {\n\n  /* CommonJS */\n  if (typeof module == 'object' && module.exports) module.exports = factory()\n\n  /* AMD module */\n  else if (typeof define == 'function' && define.amd) define(factory)\n\n  /* Browser global */\n  else root.Spinner = factory()\n}(this, function () {\n  \"use strict\"\n\n  var prefixes = ['webkit', 'Moz', 'ms', 'O'] /* Vendor prefixes */\n    , animations = {} /* Animation rules keyed by their name */\n    , useCssAnimations /* Whether to use CSS animations or setTimeout */\n    , sheet /* A stylesheet to hold the @keyframe or VML rules. */\n\n  /**\n   * Utility function to create elements. If no tag name is given,\n   * a DIV is created. Optionally properties can be passed.\n   */\n  function createEl (tag, prop) {\n    var el = document.createElement(tag || 'div')\n      , n\n\n    for (n in prop) el[n] = prop[n]\n    return el\n  }\n\n  /**\n   * Appends children and returns the parent.\n   */\n  function ins (parent /* child1, child2, ...*/) {\n    for (var i = 1, n = arguments.length; i < n; i++) {\n      parent.appendChild(arguments[i])\n    }\n\n    return parent\n  }\n\n  /**\n   * Creates an opacity keyframe animation rule and returns its name.\n   * Since most mobile Webkits have timing issues with animation-delay,\n   * we create separate rules for each line/segment.\n   */\n  function addAnimation (alpha, trail, i, lines) {\n    var name = ['opacity', trail, ~~(alpha * 100), i, lines].join('-')\n      , start = 0.01 + i/lines * 100\n      , z = Math.max(1 - (1-alpha) / trail * (100-start), alpha)\n      , prefix = useCssAnimations.substring(0, useCssAnimations.indexOf('Animation')).toLowerCase()\n      , pre = prefix && '-' + prefix + '-' || ''\n\n    if (!animations[name]) {\n      sheet.insertRule(\n        '@' + pre + 'keyframes ' + name + '{' +\n        '0%{opacity:' + z + '}' +\n        start + '%{opacity:' + alpha + '}' +\n        (start+0.01) + '%{opacity:1}' +\n        (start+trail) % 100 + '%{opacity:' + alpha + '}' +\n        '100%{opacity:' + z + '}' +\n        '}', sheet.cssRules.length)\n\n      animations[name] = 1\n    }\n\n    return name\n  }\n\n  /**\n   * Tries various vendor prefixes and returns the first supported property.\n   */\n  function vendor (el, prop) {\n    var s = el.style\n      , pp\n      , i\n\n    prop = prop.charAt(0).toUpperCase() + prop.slice(1)\n    if (s[prop] !== undefined) return prop\n    for (i = 0; i < prefixes.length; i++) {\n      pp = prefixes[i]+prop\n      if (s[pp] !== undefined) return pp\n    }\n  }\n\n  /**\n   * Sets multiple style properties at once.\n   */\n  function css (el, prop) {\n    for (var n in prop) {\n      el.style[vendor(el, n) || n] = prop[n]\n    }\n\n    return el\n  }\n\n  /**\n   * Fills in default values.\n   */\n  function merge (obj) {\n    for (var i = 1; i < arguments.length; i++) {\n      var def = arguments[i]\n      for (var n in def) {\n        if (obj[n] === undefined) obj[n] = def[n]\n      }\n    }\n    return obj\n  }\n\n  /**\n   * Returns the line color from the given string or array.\n   */\n  function getColor (color, idx) {\n    return typeof color == 'string' ? color : color[idx % color.length]\n  }\n\n  // Built-in defaults\n\n  var defaults = {\n    lines: 12             // The number of lines to draw\n  , length: 7             // The length of each line\n  , width: 5              // The line thickness\n  , radius: 10            // The radius of the inner circle\n  , scale: 1.0            // Scales overall size of the spinner\n  , corners: 1            // Roundness (0..1)\n  , color: '#000'         // #rgb or #rrggbb\n  , opacity: 1/4          // Opacity of the lines\n  , rotate: 0             // Rotation offset\n  , direction: 1          // 1: clockwise, -1: counterclockwise\n  , speed: 1              // Rounds per second\n  , trail: 100            // Afterglow percentage\n  , fps: 20               // Frames per second when using setTimeout()\n  , zIndex: 2e9           // Use a high z-index by default\n  , className: 'spinner'  // CSS class to assign to the element\n  , top: '50%'            // center vertically\n  , left: '50%'           // center horizontally\n  , shadow: false         // Whether to render a shadow\n  , hwaccel: false        // Whether to use hardware acceleration (might be buggy)\n  , position: 'absolute'  // Element positioning\n  }\n\n  /** The constructor */\n  function Spinner (o) {\n    this.opts = merge(o || {}, Spinner.defaults, defaults)\n  }\n\n  // Global defaults that override the built-ins:\n  Spinner.defaults = {}\n\n  merge(Spinner.prototype, {\n    /**\n     * Adds the spinner to the given target element. If this instance is already\n     * spinning, it is automatically removed from its previous target b calling\n     * stop() internally.\n     */\n    spin: function (target) {\n      this.stop()\n\n      var self = this\n        , o = self.opts\n        , el = self.el = createEl(null, {className: o.className})\n\n      css(el, {\n        position: o.position\n      , width: 0\n      , zIndex: o.zIndex\n      , left: o.left\n      , top: o.top\n      })\n\n      if (target) {\n        target.insertBefore(el, target.firstChild || null)\n      }\n\n      el.setAttribute('role', 'progressbar')\n      self.lines(el, self.opts)\n\n      if (!useCssAnimations) {\n        // No CSS animation support, use setTimeout() instead\n        var i = 0\n          , start = (o.lines - 1) * (1 - o.direction) / 2\n          , alpha\n          , fps = o.fps\n          , f = fps / o.speed\n          , ostep = (1 - o.opacity) / (f * o.trail / 100)\n          , astep = f / o.lines\n\n        ;(function anim () {\n          i++\n          for (var j = 0; j < o.lines; j++) {\n            alpha = Math.max(1 - (i + (o.lines - j) * astep) % f * ostep, o.opacity)\n\n            self.opacity(el, j * o.direction + start, alpha, o)\n          }\n          self.timeout = self.el && setTimeout(anim, ~~(1000 / fps))\n        })()\n      }\n      return self\n    }\n\n    /**\n     * Stops and removes the Spinner.\n     */\n  , stop: function () {\n      var el = this.el\n      if (el) {\n        clearTimeout(this.timeout)\n        if (el.parentNode) el.parentNode.removeChild(el)\n        this.el = undefined\n      }\n      return this\n    }\n\n    /**\n     * Internal method that draws the individual lines. Will be overwritten\n     * in VML fallback mode below.\n     */\n  , lines: function (el, o) {\n      var i = 0\n        , start = (o.lines - 1) * (1 - o.direction) / 2\n        , seg\n\n      function fill (color, shadow) {\n        return css(createEl(), {\n          position: 'absolute'\n        , width: o.scale * (o.length + o.width) + 'px'\n        , height: o.scale * o.width + 'px'\n        , background: color\n        , boxShadow: shadow\n        , transformOrigin: 'left'\n        , transform: 'rotate(' + ~~(360/o.lines*i + o.rotate) + 'deg) translate(' + o.scale*o.radius + 'px' + ',0)'\n        , borderRadius: (o.corners * o.scale * o.width >> 1) + 'px'\n        })\n      }\n\n      for (; i < o.lines; i++) {\n        seg = css(createEl(), {\n          position: 'absolute'\n        , top: 1 + ~(o.scale * o.width / 2) + 'px'\n        , transform: o.hwaccel ? 'translate3d(0,0,0)' : ''\n        , opacity: o.opacity\n        , animation: useCssAnimations && addAnimation(o.opacity, o.trail, start + i * o.direction, o.lines) + ' ' + 1 / o.speed + 's linear infinite'\n        })\n\n        if (o.shadow) ins(seg, css(fill('#000', '0 0 4px #000'), {top: '2px'}))\n        ins(el, ins(seg, fill(getColor(o.color, i), '0 0 1px rgba(0,0,0,.1)')))\n      }\n      return el\n    }\n\n    /**\n     * Internal method that adjusts the opacity of a single line.\n     * Will be overwritten in VML fallback mode below.\n     */\n  , opacity: function (el, i, val) {\n      if (i < el.childNodes.length) el.childNodes[i].style.opacity = val\n    }\n\n  })\n\n\n  function initVML () {\n\n    /* Utility function to create a VML tag */\n    function vml (tag, attr) {\n      return createEl('<' + tag + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"spin-vml\">', attr)\n    }\n\n    // No CSS transforms but VML support, add a CSS rule for VML elements:\n    sheet.addRule('.spin-vml', 'behavior:url(#default#VML)')\n\n    Spinner.prototype.lines = function (el, o) {\n      var r = o.scale * (o.length + o.width)\n        , s = o.scale * 2 * r\n\n      function grp () {\n        return css(\n          vml('group', {\n            coordsize: s + ' ' + s\n          , coordorigin: -r + ' ' + -r\n          })\n        , { width: s, height: s }\n        )\n      }\n\n      var margin = -(o.width + o.length) * o.scale * 2 + 'px'\n        , g = css(grp(), {position: 'absolute', top: margin, left: margin})\n        , i\n\n      function seg (i, dx, filter) {\n        ins(\n          g\n        , ins(\n            css(grp(), {rotation: 360 / o.lines * i + 'deg', left: ~~dx})\n          , ins(\n              css(\n                vml('roundrect', {arcsize: o.corners})\n              , { width: r\n                , height: o.scale * o.width\n                , left: o.scale * o.radius\n                , top: -o.scale * o.width >> 1\n                , filter: filter\n                }\n              )\n            , vml('fill', {color: getColor(o.color, i), opacity: o.opacity})\n            , vml('stroke', {opacity: 0}) // transparent stroke to fix color bleeding upon opacity change\n            )\n          )\n        )\n      }\n\n      if (o.shadow)\n        for (i = 1; i <= o.lines; i++) {\n          seg(i, -2, 'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')\n        }\n\n      for (i = 1; i <= o.lines; i++) seg(i)\n      return ins(el, g)\n    }\n\n    Spinner.prototype.opacity = function (el, i, val, o) {\n      var c = el.firstChild\n      o = o.shadow && o.lines || 0\n      if (c && i + o < c.childNodes.length) {\n        c = c.childNodes[i + o]; c = c && c.firstChild; c = c && c.firstChild\n        if (c) c.opacity = val\n      }\n    }\n  }\n\n  if (typeof document !== 'undefined') {\n    sheet = (function () {\n      var el = createEl('style', {type : 'text/css'})\n      ins(document.getElementsByTagName('head')[0], el)\n      return el.sheet || el.styleSheet\n    }())\n\n    var probe = css(createEl('group'), {behavior: 'url(#default#VML)'})\n\n    if (!vendor(probe, 'transform') && probe.adj) initVML()\n    else useCssAnimations = vendor(probe, 'animation')\n  }\n\n  return Spinner\n\n}));\n\n/**\n * Copyright (c) 2011-2014 Felix Gnass\n * Licensed under the MIT license\n * http://spin.js.org/\n */\n\n/*\n\nBasic Usage:\n============\n\n$('#el').spin() // Creates a default Spinner using the text color of #el.\n$('#el').spin({ ... }) // Creates a Spinner using the provided options.\n\n$('#el').spin(false) // Stops and removes the spinner.\n\nUsing Presets:\n==============\n\n$('#el').spin('small') // Creates a 'small' Spinner using the text color of #el.\n$('#el').spin('large', '#fff') // Creates a 'large' white Spinner.\n\nAdding a custom preset:\n=======================\n\n$.fn.spin.presets.flower = {\n  lines:   9\n, length: 10\n, width:  20\n, radius:  0\n}\n\n$('#el').spin('flower', 'red')\n\n*/\n\n;(function(factory) {\n\n  if (typeof exports == 'object') {\n    // CommonJS\n    factory(require('jquery'), require('spin.js'))\n  } else if (typeof define == 'function' && define.amd) {\n    // AMD, register as anonymous module\n    define(['jquery', 'spin'], factory)\n  } else {\n    // Browser globals\n    if (!window.Spinner) throw new Error('Spin.js not present')\n    factory(window.jQuery, window.Spinner)\n  }\n\n}(function($, Spinner) {\n\n  $.fn.spin = function(opts, color) {\n\n    return this.each(function() {\n      var $this = $(this)\n        , data = $this.data()\n\n      if (data.spinner) {\n        data.spinner.stop()\n        delete data.spinner\n      }\n      if (opts !== false) {\n        opts = $.extend(\n          { color: color || $this.css('color') }\n        , $.fn.spin.presets[opts] || opts\n        )\n        data.spinner = new Spinner(opts).spin(this)\n      }\n    })\n  }\n\n  $.fn.spin.presets = {\n    tiny:  { lines:  8, length: 2, width: 2, radius: 3 }\n  , small: { lines:  8, length: 4, width: 3, radius: 5 }\n  , large: { lines: 10, length: 8, width: 4, radius: 8 }\n  }\n\n}));\n\n// ==== WP AJAX PAGE LOADER 0.2.1 ==== //\n\n// WP AJAX Page Loader documentation: https://github.com/synapticism/wp-ajax-page-loader\n// Based on Ajaxinate: https://github.com/synapticism/ajaxinate\n// With some help from: http://www.problogdesign.com/wordpress/load-next-wordpress-posts-with-ajax/\n\n// Global namespace object; inspiration for the design of this via Ryan Florence: http://ryanflorence.com/authoring-jquery-plugins-with-object-oriented-javascript/\nvar PG8 = {};\n\n(function($, document, window, undefined){\n  'use strict';\n\n  // Exit early if WordPress script variables aren't available\n  if (typeof PG8Data === 'undefined') {\n    return;\n  }\n\n  // Initialize HTML5-History-API polyfill with this single line\n  var location = window.history.location || window.location;\n\n  // Constructor function\n  var PageLoader = this.PageLoader = function(opts){\n    this.thisLink = location.href;\n    this.nextLink = PG8Data.nextLink;\n    this.thisPage = parseInt(PG8Data.startPage, 10);\n    this.nextPage = this.thisPage + 1;\n    this.maxPages = parseInt(PG8Data.maxPages, 10);\n    this.maxedOut = 0; // A flag to determine whether all pages have been loaded\n    this.opts     = $.extend({}, $.fn.ajaxPageLoader.defaults, opts);\n    this.content  = $(this.opts.content);\n\n    // Initialize page loader only if there are pages to load\n    if (this.nextPage <= this.maxPages) {\n      this.init();\n    }\n  };\n\n\n\n  // Prototype functionality\n  PageLoader.prototype = {\n    init: function(){\n\n      // Wrap all the children of the main element in a way that is consistent with how content is loaded\n      this.content.children().wrapAll('<div id=\"content-page-'+this.thisPage+'\" class=\"clear\" data-href=\"'+this.thisLink+'\"></div>');\n\n      // Create the first (place)holder div that content will be loaded into\n      this.holder();\n\n      // Bind event handlers\n      this.handler();\n\n      // Initialize spinner\n      this.spinner();\n    },\n\n\n\n    // Create a placeholder; abstracted into a function for DRYness\n    holder: function(){\n      this.content.append('<div id=\"content-page-' + this.nextPage + '\" class=\"clear\" data-href=\"'+this.nextLink+'\"></div>');\n    }, // end holder()\n\n\n\n    // Event handlers\n    handler: function(){\n      var\n        self    = this,\n        $window = $(window);\n\n      // Bind to click events on the body element to ensure compatibility with other forms of DOM manipulation we may be doing\n      $('body').on('click', self.opts.next, function(event){\n\n        // Are there more posts to load? This has to be checked again as nextPage increments\n        if (self.nextPage <= self.maxPages) {\n\n          // Cancel page request\n          event.preventDefault();\n\n          // Invoke spinner\n          $(this).parents('nav:first').before($('#spinner').show());\n\n          // Load content\n          self.loader(self.nextPage, self.nextLink);\n        }\n      }); // end .on('click')\n\n\n\n      // Watch scroll position and change URL accordingly\n      $window.on('scroll', this.content, function(event){\n\n        // Clear previously set timer\n        clearTimeout($.data(this, 'pushTimer'));\n        clearTimeout($.data(this, 'infinTimer'));\n\n        // Manage push state based on scroll position; keeps the URL updated wherever the window position is\n        $.data(this, 'pushTimer', setTimeout(function() {\n\n          // Setup some useful variables including info about the top-most page\n          var\n            firstPage = self.content.children(':first'),\n            firstTop  = firstPage.offset().top,\n            firstLink = firstPage.data('href'),\n            winTop    = $window.scrollTop();\n\n          // Push state if the top of the window is above the first page\n          if ( winTop <= firstTop ) {\n            self.pusher(firstLink);\n          } else {\n\n            // Monitor the children of the main content selector; should be a bunch of divs representing each page of content\n            self.content.children().each(function(){\n              var\n                $this   = $(this),\n                top     = $this.offset().top - self.opts.scrollOffset,\n                bottom  = $this.outerHeight()+top;\n\n              // Push state if the top of the window falls into the range of a given page\n              if ( top <= winTop && winTop < bottom ) {\n                self.pusher($this.data('href'));\n              }\n            }); // end each()\n          } // end if\n        }, self.opts.pushDelay)); // end $.data()\n\n        // Infinite scroll, a lazy (yet smart) implementation\n        if ( self.maxedOut === 0 && self.opts.infinScroll === true ) { // Only bother with this if there are more pages to load AND infinite scroll is on\n          $.data(this, 'infinTimer', setTimeout(function() {\n            var\n              $document       = $(document),\n              scrollHeight    = $document.height(),\n              scrollPosition  = $window.height() + $window.scrollTop(), // Position of the bottom of the window\n              scrollLastPage  = self.content.children(':last').offset().top, // Bottom of the content area\n              scrollDiff      = scrollHeight - scrollPosition; // How close to the absolute bottom of the document\n\n            // Trigger a click when the bottom of the window is just below the contents of the last page\n            // But not the absolute bottom; we'd like to be able to reach the footer if we can!\n            if ( scrollPosition > scrollLastPage + self.opts.scrollOffset && scrollPosition <= scrollLastPage + self.opts.scrollOffset + self.opts.infinOffset && scrollDiff >= self.opts.infinFooter ) {\n              $(self.opts.next).trigger('click');\n            }\n          }, self.opts.infinDelay)); // end $.data()\n        } // end infinite scroll\n      }); // end $window.on('scroll')\n    }, // end handler()\n\n\n\n    // Conditionally initialize spinner div; degrades gracefully if spin.js not found\n    spinner: function(){\n      if ( $.isFunction(window.Spinner) ) {\n        this.content.after('<div id=\"spinner\" style=\"position: relative;\"></div>');\n        $('#spinner').spin(this.opts.spinOpts).hide();\n      }\n    }, // end spinner()\n\n\n\n    pusher: function(url){\n      if (typeof url !== 'undefined' && url !== location.href) {\n        history.pushState(null,null,url);\n      }\n    }, // end pusher()\n\n\n\n    // Page loader\n    loader: function(page, link){\n      var self = this;\n\n      // Load content into the appropriate container\n      $('#content-page-'+page).load(link+' '+self.opts.content+' > *', function() {\n\n        // Cache the next selector\n        var $navLink = $(self.opts.next);\n\n        // Update page number and nextLink\n        self.thisPage = page;\n        self.thisLink = link;\n        self.nextPage = page + 1;\n        self.nextLink = link.replace(/\\/page\\/[0-9]*/, '/page/'+self.nextPage);\n\n        // @TODO: load scripts necessary to display content on new pages e.g. MediaElement.js\n        // Presently this script assumes all scripts are already loaded\n        // Follow the link for an example: https://github.com/Automattic/jetpack/blob/master/modules/infinite-scroll/infinity.js\n\n        // Change the URL\n        self.pusher(self.thisLink);\n\n        // Create another placeholder\n        self.holder();\n\n        // Navigation link handling: 1) have we reached the last page? 2) if not, update the link\n        if (self.nextPage > self.maxPages) {\n          $navLink.remove(); // No more content can be loaded; hide the next button or link\n          self.maxedOut = 1; // Set a flag to avoid further processing\n        } else {\n          if ( $navLink.is('[href]') ) {\n            $navLink.attr('href', self.nextLink); // Next selector has href; update it for right-clicking etc.\n          } else {\n            $('[href]', $navLink).attr('href', self.nextLink); // Next selector contains href\n          }\n        }\n\n        // Hide spinner\n        $('#spinner').hide();\n\n        // Hide previous link (if one exists)\n        $(self.opts.prev).hide();\n\n        // Emit loaded event\n        self.loaded();\n\n        // Scroll to the appropriate location\n        self.scroll();\n\n        // Update analytics with relative URL on load (not on scroll)\n        self.analytics('/'+location.href.replace(self.root(), ''));\n      });\n    }, // end loader()\n\n\n\n    // Emit the DOMContentLoaded event (for compatibility with Prism.js and other scripts)\n    loaded: function(){\n      var loaded = document.createEvent(\"Event\");\n      loaded.initEvent(\"DOMContentLoaded\", true, true);\n      window.document.dispatchEvent(loaded);\n    },\n\n\n\n    // Scroll to the top of the new content container\n    scroll: function(){\n      var top = $('#content-page-'+this.thisPage).children(':first').offset().top - this.opts.scrollOffset;\n      $('body, html').animate({ scrollTop: top }, this.opts.scrollDelay, \"swing\");\n    }, // end scroll()\n\n\n\n    // Update Google Analytics on content load, not on scroll\n    analytics: function(url){\n      // Inform Google Analytics of the change; compatible with the new Universal Analytics script\n      if ( typeof window.ga !== 'undefined' ) {\n        window.ga('send', 'pageview', url);\n      } else if ( typeof window._gaq !== 'undefined' ) {\n        window._gaq.push(['_trackPageview', url]); // Legacy analytics; ref: https://github.com/browserstate/ajaxify/pull/25\n      }\n    }, // end analytics()\n\n\n\n    // Utility function to get the root URL with trailing slash e.g. http(s)://yourdomain.com/\n    root: function(){\n      var\n        port = document.location.port ? ':' + document.location.port : '',\n        url = document.location.protocol + '//' + (document.location.hostname || document.location.host) + port + '/';\n      return url;\n    } // end root()\n  };\n\n\n\n  $.fn.ajaxPageLoader = function (opts){\n    return this.each(function(){\n      if (!$.data(this, 'ajaxPageLoader')) {\n        $.data(this, 'ajaxPageLoader', new PageLoader(opts));\n      }\n    });\n  };\n\n\n\n  // Extensible default settings\n  $.fn.ajaxPageLoader.defaults = {\n    content:      'main'        // The content selector; this varies from theme to theme\n  , next:         '.next-page'  // Selector for the \"next\" navigation link; this is also theme-dependent\n  , prev:         '.prev-page'  // Selector for the \"next\" navigation link; this is also theme-dependent\n  , scrollDelay:  300           // Smooth scrolling delay; use a larger value for a smoother scroll (s)\n  , scrollOffset: 30            // Scroll offset from the top of the new page to account for margins (px)\n  , pushDelay:    250           // How long to wait before attempting to update history state (s)\n  , infinScroll:  true          // Switch for infinite scrolling functionality (true/false)\n  , infinDelay:   600           // How long to wait before requesting new content automatically (s)\n  , infinOffset:  300           // Height of the area below the last page in which infinite scrolling will be triggered (px)\n  , infinFooter:  1             // Height from the bottom of the page from which infinite scrolling *won't* be triggered (px)\n  , spinOpts: {                 // spin.js options; reference: https://fgnass.github.io/spin.js/\n      lines:  25\n    , length: 0\n    , width:  4\n    , radius: 25\n    , speed:  1.5\n    , trail:  40\n    , top:    '15px'\n    }\n  };\n}).apply(PG8, [jQuery, document, window]);\n\n// ==== WP AJAX PAGE LOADER ==== //\n\n// Invoke the AJAX page loader; this is in its own file as the script is conditionally loaded by the theme\n;(function($){\n  $(function(){\n    $(document.body).ajaxPageLoader();\n\n    // If jQuery.timeago exists also update timestamps on AJAX page load; if you remove the timeago script this can be deleted\n    if ($.timeago) {\n      document.addEventListener(\"DOMContentLoaded\", function (event) {\n        $('time').timeago();\n      });\n    }\n  });\n}(jQuery));\n\n/**\n * Timeago is a jQuery plugin that makes it easy to support automatically\n * updating fuzzy timestamps (e.g. \"4 minutes ago\" or \"about 1 day ago\").\n *\n * @name timeago\n * @version 1.5.2\n * @requires jQuery v1.2.3+\n * @author Ryan McGeary\n * @license MIT License - http://www.opensource.org/licenses/mit-license.php\n *\n * For usage and examples, visit:\n * http://timeago.yarp.com/\n *\n * Copyright (c) 2008-2015, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)\n */\n\n(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['jquery'], factory);\n  } else if (typeof module === 'object' && typeof module.exports === 'object') {\n    factory(require('jquery'));\n  } else {\n    // Browser globals\n    factory(jQuery);\n  }\n}(function ($) {\n  $.timeago = function(timestamp) {\n    if (timestamp instanceof Date) {\n      return inWords(timestamp);\n    } else if (typeof timestamp === \"string\") {\n      return inWords($.timeago.parse(timestamp));\n    } else if (typeof timestamp === \"number\") {\n      return inWords(new Date(timestamp));\n    } else {\n      return inWords($.timeago.datetime(timestamp));\n    }\n  };\n  var $t = $.timeago;\n\n  $.extend($.timeago, {\n    settings: {\n      refreshMillis: 60000,\n      allowPast: true,\n      allowFuture: false,\n      localeTitle: false,\n      cutoff: 0,\n      autoDispose: true,\n      strings: {\n        prefixAgo: null,\n        prefixFromNow: null,\n        suffixAgo: \"ago\",\n        suffixFromNow: \"from now\",\n        inPast: 'any moment now',\n        seconds: \"less than a minute\",\n        minute: \"about a minute\",\n        minutes: \"%d minutes\",\n        hour: \"about an hour\",\n        hours: \"about %d hours\",\n        day: \"a day\",\n        days: \"%d days\",\n        month: \"about a month\",\n        months: \"%d months\",\n        year: \"about a year\",\n        years: \"%d years\",\n        wordSeparator: \" \",\n        numbers: []\n      }\n    },\n\n    inWords: function(distanceMillis) {\n      if (!this.settings.allowPast && ! this.settings.allowFuture) {\n          throw 'timeago allowPast and allowFuture settings can not both be set to false.';\n      }\n\n      var $l = this.settings.strings;\n      var prefix = $l.prefixAgo;\n      var suffix = $l.suffixAgo;\n      if (this.settings.allowFuture) {\n        if (distanceMillis < 0) {\n          prefix = $l.prefixFromNow;\n          suffix = $l.suffixFromNow;\n        }\n      }\n\n      if (!this.settings.allowPast && distanceMillis >= 0) {\n        return this.settings.strings.inPast;\n      }\n\n      var seconds = Math.abs(distanceMillis) / 1000;\n      var minutes = seconds / 60;\n      var hours = minutes / 60;\n      var days = hours / 24;\n      var years = days / 365;\n\n      function substitute(stringOrFunction, number) {\n        var string = $.isFunction(stringOrFunction) ? stringOrFunction(number, distanceMillis) : stringOrFunction;\n        var value = ($l.numbers && $l.numbers[number]) || number;\n        return string.replace(/%d/i, value);\n      }\n\n      var words = seconds < 45 && substitute($l.seconds, Math.round(seconds)) ||\n        seconds < 90 && substitute($l.minute, 1) ||\n        minutes < 45 && substitute($l.minutes, Math.round(minutes)) ||\n        minutes < 90 && substitute($l.hour, 1) ||\n        hours < 24 && substitute($l.hours, Math.round(hours)) ||\n        hours < 42 && substitute($l.day, 1) ||\n        days < 30 && substitute($l.days, Math.round(days)) ||\n        days < 45 && substitute($l.month, 1) ||\n        days < 365 && substitute($l.months, Math.round(days / 30)) ||\n        years < 1.5 && substitute($l.year, 1) ||\n        substitute($l.years, Math.round(years));\n\n      var separator = $l.wordSeparator || \"\";\n      if ($l.wordSeparator === undefined) { separator = \" \"; }\n      return $.trim([prefix, words, suffix].join(separator));\n    },\n\n    parse: function(iso8601) {\n      var s = $.trim(iso8601);\n      s = s.replace(/\\.\\d+/,\"\"); // remove milliseconds\n      s = s.replace(/-/,\"/\").replace(/-/,\"/\");\n      s = s.replace(/T/,\" \").replace(/Z/,\" UTC\");\n      s = s.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/,\" $1$2\"); // -04:00 -> -0400\n      s = s.replace(/([\\+\\-]\\d\\d)$/,\" $100\"); // +09 -> +0900\n      return new Date(s);\n    },\n    datetime: function(elem) {\n      var iso8601 = $t.isTime(elem) ? $(elem).attr(\"datetime\") : $(elem).attr(\"title\");\n      return $t.parse(iso8601);\n    },\n    isTime: function(elem) {\n      // jQuery's `is()` doesn't play well with HTML5 in IE\n      return $(elem).get(0).tagName.toLowerCase() === \"time\"; // $(elem).is(\"time\");\n    }\n  });\n\n  // functions that can be called via $(el).timeago('action')\n  // init is default when no action is given\n  // functions are called with context of a single element\n  var functions = {\n    init: function() {\n      var refresh_el = $.proxy(refresh, this);\n      refresh_el();\n      var $s = $t.settings;\n      if ($s.refreshMillis > 0) {\n        this._timeagoInterval = setInterval(refresh_el, $s.refreshMillis);\n      }\n    },\n    update: function(timestamp) {\n      var date = (timestamp instanceof Date) ? timestamp : $t.parse(timestamp);\n      $(this).data('timeago', { datetime: date });\n      if ($t.settings.localeTitle) $(this).attr(\"title\", date.toLocaleString());\n      refresh.apply(this);\n    },\n    updateFromDOM: function() {\n      $(this).data('timeago', { datetime: $t.parse( $t.isTime(this) ? $(this).attr(\"datetime\") : $(this).attr(\"title\") ) });\n      refresh.apply(this);\n    },\n    dispose: function () {\n      if (this._timeagoInterval) {\n        window.clearInterval(this._timeagoInterval);\n        this._timeagoInterval = null;\n      }\n    }\n  };\n\n  $.fn.timeago = function(action, options) {\n    var fn = action ? functions[action] : functions.init;\n    if (!fn) {\n      throw new Error(\"Unknown function name '\"+ action +\"' for timeago\");\n    }\n    // each over objects here and call the requested function\n    this.each(function() {\n      fn.call(this, options);\n    });\n    return this;\n  };\n\n  function refresh() {\n    var $s = $t.settings;\n\n    //check if it's still visible\n    if ($s.autoDispose && !$.contains(document.documentElement,this)) {\n      //stop if it has been removed\n      $(this).timeago(\"dispose\");\n      return this;\n    }\n\n    var data = prepareData(this);\n\n    if (!isNaN(data.datetime)) {\n      if ( $s.cutoff == 0 || Math.abs(distance(data.datetime)) < $s.cutoff) {\n        $(this).text(inWords(data.datetime));\n      }\n    }\n    return this;\n  }\n\n  function prepareData(element) {\n    element = $(element);\n    if (!element.data(\"timeago\")) {\n      element.data(\"timeago\", { datetime: $t.datetime(element) });\n      var text = $.trim(element.text());\n      if ($t.settings.localeTitle) {\n        element.attr(\"title\", element.data('timeago').datetime.toLocaleString());\n      } else if (text.length > 0 && !($t.isTime(element) && element.attr(\"title\"))) {\n        element.attr(\"title\", text);\n      }\n    }\n    return element.data(\"timeago\");\n  }\n\n  function inWords(date) {\n    return $t.inWords(distance(date));\n  }\n\n  function distance(date) {\n    return (new Date().getTime() - date.getTime());\n  }\n\n  // fix for IE6 suckage\n  document.createElement(\"abbr\");\n  document.createElement(\"time\");\n}));\n\n// ==== RESPONSIVE MENU ==== //\n\n// Menu toggle script adapted from _s: https://github.com/Automattic/_s\n;(function() {\n  var nav       = document.getElementById('site-navigation'),\n      menu      = document.getElementById('responsive-menu'),\n      button    = document.getElementById('responsive-menu-toggle');\n\n  // Early exit if we're missing anything essential\n  if (!nav || typeof button === 'undefined') {\n    return;\n  }\n\n  // Hide button if menu is empty and return early\n  if (typeof menu === 'undefined') {\n    button.style.display = 'none';\n    return;\n  }\n\n  // Toggle navigation; add or remove a class to both the button and the nav element itself\n  button.onclick = function() {\n    if (button.className.indexOf( 'active' ) !== -1) {\n      nav.style.display = 'none';\n      button.className = button.className.replace(' active', '');\n    } else {\n      nav.style.display = 'block';\n      button.className += ' active';\n    }\n  };\n} )();\n\n// ==== CORE ==== //\n\n// A simple wrapper for all your custom jQuery; everything in this file will be run on every page\n;(function($){\n  $(function(){\n    // Example integration: JavaScript-based human-readable timestamps\n    if ($.timeago) {\n      $('time').timeago();\n    }\n  });\n}(jQuery));\n"],"sourceRoot":"/source/"}